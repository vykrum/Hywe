    name: DeployToGitHubPages
    env:
      PUBLISH_DIR: bin/Release/net8.0/publish # Removed /wwwroot

    on:
      push:
        branches: [master]

    permissions:
      contents: write
      id-token: write

    jobs:
      build-and-deploy:
        runs-on: ubuntu-latest

        steps:
          - name: Checkout
            uses: actions/checkout@v3

          - name: Setup .NET
            uses: actions/setup-dotnet@v3
            with:
              dotnet-version: '8.0.x'

          - name: Change to Client Directory
            run: cd ./Hywe.Client # Add this step

          - name: Publish Bolero app
            run: dotnet publish Hywe.Client.fsproj -c Release -o $PUBLISH_DIR

          - name: Copy to docs
            run: |
              mkdir -p docs
              cp -r $PUBLISH_DIR/wwwroot/* docs/

          - name: Rewrite base href
            uses: SteveSandersonMS/ghaction-rewrite-base-href@v1
            with:
              html_path: docs/index.html
              base_href: /

          - name: Create CNAME
            run: echo 'hywe.in' > docs/CNAME

          - name: Deploy to GitHub Pages
            uses: actions/deploy-pages@v3
    
